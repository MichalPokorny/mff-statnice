{function useContent(c,ed){var is_editor=(_gEOWork("htmlcont")!=null)?_gEOWork("htmlcont"):false;if(top.hintEditor.cont){top.hintEditor.externalWclose(e);_gEOWork(c).value=top.hintEditor.getContent();}else{top._gEOWork(c).value=top._gEOWork("jtextcont").innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">");}if(is_editor&&_gEOWork("htmlEditor-hidden").value=="1"){if(ed!=null){if(document.all&&!document.fireEvent&&!window.opera)var editorHTML=ed._iframe5;else{var editorHTML=ed._iframe.contentWindow;}var tmp=top._gEOWork("jtextcont").innerHTML;tmp=tmp.replace(/<span class="h_[^<]*>([^<]*)<\/span>/ig,"$1");editorHTML.document.body.innerHTML=tmp;}}switchEdit(c,"inline","none");};function switchEdit(c,g1,g2){var is_editor=(_gEOWork("htmlcont")!=null)?_gEOWork("htmlcont"):false;if(hintEditor.cont){top.hintEditor.externalWclose(e);}if(is_editor&&_gEOWork("htmlEditor-hidden").value=="1"){var editorHTML=_gEOWork("html-iframe");_gEOWork("editor").style.display=(g1=="inline")?"block":g1;editorHTML.style.display=(g1=="inline")?"block":g1;if(g1=="inline"&&navigator.product=="Gecko"){desingOff=function(){editorHTML.contentWindow.document.designMode="off";setTimeout(desingOn,1);};desingOn=function(){editorHTML.contentWindow.document.designMode="on";};setTimeout("desingOff()",100);}}else{_gEOWork(c).style.display=(g1=="inline")?"block":g1;}_gEOWork("jscontent").style.display=(g2=="inline")?"block":g2;_gEOWork("show-scheck").style.display=g1;_gEOWork("butonky").style.display=(g1=="inline")?"block":g1;_gEOWork("scheck-box").style.display=(g2=="inline")?"block":g2;};var cancelWrite={"lnks":null,"txt":"","cnfrm":function(e){if(_gEOWork("changed").value==1){e=!e?window.event:e;var x=confirm(top.cancelWrite.txt);if(!x){top.evnt.stopEvent(e);}}},"init":function(text){this.txt=text;this.lnks=top._gEOWork("menu").getElementsByTagName("a");for(i=1;i<top.cancelWrite.lnks.length;i++){top.evnt.addEvent(top.cancelWrite.lnks[i],"click",top.cancelWrite.cnfrm,true);}}};var hintEditor={"cont":null,"sel":null,"list":null,"doc":null,"hints":{},"OKButt":null,"InpVal":null,"hntcnt":null,"init":function(doc,cont){this.hntcnt=doc.getElementById("hint-cnt");cont=doc.getElementById(cont);if(!cont)return true;hintEditor.addClick(cont);evnt.addEvent(_gEOWork("jscontent"),"click",hintEditor.wclose,false);evnt.addEvent(_gEOWork("jscontent"),"scroll",hintEditor.wclose,false);hintEditor.doc=doc;hintEditor.cont=cont;hintEditor.list=this.hntcnt.appendChild(doc.createElement("div"));hintEditor.list.className="hint-list";hintEditor.list.style.display="none";return false;},"addClick":function(_cont){for(var i=0;i<_cont.childNodes.length;i++){var node=_cont.childNodes[i];if(node.childNodes)hintEditor.addClick(node);if(node.nodeName&&node.nodeName.toLowerCase()!="span")continue;else{if(node.className.indexOf("h_")!=0)continue;}node.className+=" hint";evnt.addEvent(node,"click",hintEditor.wsel,false);}},"wsel":function(e){var e=evnt.setEvent(e);var _this=evnt.setEventTarget(e);idx=_this.className.indexOf(" ");if(idx==-1)id=_this.className;else{id=_this.className.substr(0,idx);}if(!hintEditor.hints[id])return false;if(_this.getElementsByTagName("input").length!=0)return false;if(hintEditor.cont.getElementsByTagName("input").length!=0)hintEditor.onClkButt(e);if(hintEditor.sel==id){hintEditor.wclose();return false;}hintEditor.sel=id;hintEditor.osel=_this;while(hintEditor.list.childNodes.length)hintEditor.list.removeChild(hintEditor.list.childNodes[0]);for(var i=0;i<hintEditor.hints[id].length;i++){n=hintEditor.list.appendChild(hintEditor.doc.createElement("span"));n.onmouseover=function(){this.className="item-sel";};n.onmouseout=function(){this.className="";};evnt.addEvent(n,"click",hintEditor.hsel,false);n.innerHTML=hintEditor.hints[id][i];if(_this.innerHTML==n.innerHTML)n.style.textDecoration="underline";}var lastRow=hintEditor.doc.createElement("span");lastRow.className="ownEdit";var eLink=hintEditor.doc.createElement("a");var eLinkText=hintEditor.doc.createTextNode("Editovat...");eLink.style.fontSize="11px";eLink.appendChild(eLinkText);lastRow.appendChild(eLink);evnt.addEvent(eLink,"click",function(){top.hintEditor.goEdit(e,_this);},false);hintEditor.list.appendChild(lastRow);var oft=0;var ofl=0;var addXJC=0;var addYJC=0;addX=(hintEditor.doc.body.scrollLeft||hintEditor.doc.documentElement.scrollLeft);addY=(hintEditor.doc.body.scrollTop||hintEditor.doc.documentElement.scrollTop);hintEditor.list.style.left=""+(1+e.clientX+addX+addXJC-ofl)+"px";hintEditor.list.style.top=""+(1+e.clientY+addY+addYJC-oft)+"px";hintEditor.list.style.display="block";if(e.stopPropagation)e.stopPropagation();e.cancelBubble=true;return false;},"goEdit":function(e,span){var word=span;var val=word.firstChild.data;word.innerHTML="";var inp=hintEditor.doc.createElement("input");inp.id="koko";inp.size=12;inp.value=val;hintEditor.InpVal=inp;var butt=hintEditor.doc.createElement("input");butt.type="button";butt.value="OK";hintEditor.OKButt=butt;word.appendChild(inp);word.appendChild(butt);evnt.addEvent(butt,"click",top.hintEditor.onClkButt,false);hintEditor.wclose(e);return false;},"update":function(where,what){where.innerHTML=what;},"onClkButt":function(e){hintEditor.update(hintEditor.osel,hintEditor.InpVal.value);hintEditor.wclose(e);},"hsel":function(e){var e=evnt.setEvent(e);var _this=evnt.setEventTarget(e);hintEditor.osel.innerHTML=_this.innerHTML;hintEditor.wclose(e);},"externalWclose":function(e){top.hintEditor.wclose(e);if(hintEditor.cont.getElementsByTagName("input").length!=0)hintEditor.onClkButt(e);},"wclose":function(e){if(hintEditor.list){hintEditor.sel=null;hintEditor.list.style.display="none";}return false;},"getContent":function(){this.hntcnt.removeChild(hintEditor.list);ret=hintEditor.cont.innerHTML;ret=ret.replace(/\r?\n/g,"");ret=ret.replace(/<br[^>]*>/ig,"\n").replace(/<[^>]*>/g,"");ret=ret.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return ret;}};var executeTimeStartM;var executeTimeStartS;var executeTimeStopM;var executeTimeStopS;function mS(){var executeTimeStart=new Date();executeTimeStartM=executeTimeStart.getMilliseconds();executeTimeStartS=executeTimeStart.getSeconds();};function mE(){var executeTimeStop=new Date();executeTimeStopM=executeTimeStop.getMilliseconds();executeTimeStopS=executeTimeStop.getSeconds();};function mR(){window.status="Result: "+executeTimeStartS+":"+executeTimeStartM+" | "+executeTimeStopS+":"+executeTimeStopM;};var autoComplete={"useSMSDBSearch":false,"resultCount":5,"active":null,"listBox":null,"data":null,"inputs":["to","cc","bcc"],"str":null,"key":null,"oldArray":[],"newArray":[],"selectedIndex":null,"actRow":null,"dbContacts":[],"dbContactsSMS":[],"dbSearch":[],"setData":function(name,nick,address,phone){this.dbContacts[this.dbContacts.length]=((nick==""?"":(nick+"| "))+name+" "+address);if(phone!=""){this.dbContactsSMS[this.dbContactsSMS.length]=((nick==""?"":(nick+"| "))+name+" "+phone);}},"clearData":function(){this.dbContacts=[];this.dbContactsSMS=[];this.dbSearch=[];},"init":function(useSMSDBSearch){this.dbContactsUsed=useSMSDBSearch?this.dbContactsSMS:this.dbContacts;this.dbSearch=[];for(var i=0;i<this.dbContactsUsed.length;i++){this.dbSearch[i]=[this.dbContactsUsed[i],this._normalize(this.dbContactsUsed[i])];}var obj=this;for(i=0;i<this.inputs.length;i++){if(top._gEOWork(this.inputs[i])!=null){top.evnt.addEvent(top._gEOWork(this.inputs[i]),"focus",obj.getActicveBox,false);top.evnt.addEvent(top._gEOWork(this.inputs[i]),"keydown",obj.onKDown,false);top.evnt.addEvent(top._gEOWork(this.inputs[i]),"keypress",obj.stopCursorMove,false);top.evnt.addEvent(top._gEOWork(this.inputs[i]),"keyup",obj.getInput,false);}}},"_normalize":function(str){var charOrig="áčďéěíĺľňóôŕřšťúůýž";var charReplace="acdeeillnoorrstuuyz";var str=str.toLowerCase();var out="";for(var k=0;k<str.length;++k){var isHere=charOrig.indexOf(str.charAt(k));if(isHere!=-1){out+=charReplace.charAt(isHere);}else{out+=str.charAt(k);}}return out;},"_fillArray":function(str,type){},"onKDown":function(e){autoComplete.getOldValue(e);autoComplete.hideListTab(e);},"stopCursorMove":function(e){var keyP=autoComplete._getKey(e);if(autoComplete.listBox.style.display=="block"&&(keyP==40||keyP==38||keyP==13)){top.evnt.stopEvent(e);}if(autoComplete.listBox.style.display=="block"&&keyP==9){top.autoComplete.actRow==null?autoComplete.closeList():top.evnt.stopEvent(e);}},"hideListTab":function(e){if(!e)e=window.event;var keyP=autoComplete._getKey(e);if(autoComplete.listBox.style.display=="block"&&keyP==27){top.autoComplete.actRow=null;autoComplete.closeList();autoComplete.active.focus();}if(autoComplete.listBox.style.display=="block"&&keyP==9){top.autoComplete.actRow==null?autoComplete.closeList():top.evnt.stopEvent(e);}},"getActicveBox":function(e){autoComplete.active=top.evnt.setEventTarget(top.evnt.setEvent(e));autoComplete.listBox=top._gEOWork("autoc_"+autoComplete.active.id);},"getOldValue":function(e){autoComplete.oldArray=autoComplete.active.value.split(",");},"getInput":function(e){var oldArray=new Array();var newArray=new Array();oldArray=autoComplete.oldArray;newArray=autoComplete.active.value.split(",");autoComplete.newArray=newArray;for(i=0;i<newArray.length;i++){if(newArray[i]!=oldArray[i]){while(newArray[i].indexOf(" ")==0){newArray[i]=newArray[i].substr(1);}while(newArray[i].indexOf("\n")==0){newArray[i]=newArray[i].substr(1);}newArray[i]=newArray[i].replace("<","").replace(">","");autoComplete.selectedIndex=i;if(newArray[i]!=""){autoComplete._makeOutput(autoComplete._getResult(newArray[i]),newArray[i]);}else{autoComplete.listBox.style.display="none";}break;}}autoComplete.key=autoComplete._getKey(e);if((autoComplete.key==40||autoComplete.key==38)&&autoComplete.listBox.firstChild){autoComplete.highLightKey(autoComplete.key);}if((autoComplete.key==13||autoComplete.key==39||autoComplete.key==9)&&top.autoComplete.actRow){autoComplete.updateKey();}},"_getKey":function(e){if(!e)e=window.event;return e.keyCode;},"_getResult":function(str){var _results=[];if(autoComplete.useSMSDBSearch)_searchDB=autoComplete.dbSMSSearch;else{_searchDB=autoComplete.dbSearch;}var search=this._normalize(str);for(var i=0;i<this.dbSearch.length;i++){var index=0;while(index<this.dbSearch[i][1].length){index=this.dbSearch[i][1].indexOf(search,index);if(index==-1){break;}else{if(index==0){_results[_results.length]={"result":this.dbSearch[i],"index":index};break;}else{if(this.dbSearch[i][1].charAt(index-1)==" "){_results[_results.length]={"result":this.dbSearch[i],"index":index};break;}index++;}}}}return _results;},"_makeOutput":function(resultList,str){if(resultList.length!=0){top.evnt.addEvent(frames["work"].document,"click",top.autoComplete.closeList,false);var res="";for(k=0;k<resultList.length;k++){var item=resultList[k].result[0];var endPosition=str.length+resultList[k].index;var boldedItem=item.substring(0,resultList[k].index)+"<b>"+item.substring(resultList[k].index,endPosition)+"</b>"+item.substring(endPosition,item.length);boldedItem=(boldedItem.indexOf("| ")!=-1?("\""+boldedItem.substring(0,boldedItem.indexOf("| "))+"\""):"")+boldedItem.substring(boldedItem.indexOf("| ")+1,boldedItem.lastIndexOf(" ",boldedItem.length-2))+" &lt;"+boldedItem.substring(boldedItem.lastIndexOf(" ",boldedItem.length-2)+1,boldedItem.length)+"&gt;";res+="<div onmouseover=\"top.autoComplete.highLight(this)\" onmouseout=\"top.autoComplete.highLight(this)\" onclick=\"top.autoComplete.updateKey()\">"+boldedItem+"</div>";}autoComplete.listBox.innerHTML="";autoComplete.listBox.innerHTML=res;autoComplete.listBox.style.display="block";top.autoComplete.actRow=autoComplete.listBox.firstChild;autoComplete.listBox.firstChild.className="item-sel";}else{top.autoComplete.actRow=null;autoComplete.closeList();autoComplete.active.focus();}},"highLight":function(obj){if(top.autoComplete.actRow)top.autoComplete.actRow.className="";top.autoComplete.actRow=obj;if(obj.className=="")obj.className="item-sel";else{obj.className="";}},"highLightKey":function(key){if(top.autoComplete.actRow){if(key==40){top.autoComplete.actRow.className="";top.autoComplete.actRow=top.autoComplete.actRow.nextSibling?top.autoComplete.actRow.nextSibling:autoComplete.listBox.lastChild;top.autoComplete.actRow.className="item-sel";}else{top.autoComplete.actRow.className="";top.autoComplete.actRow=top.autoComplete.actRow.previousSibling?top.autoComplete.actRow.previousSibling:autoComplete.listBox.firstChild;top.autoComplete.actRow.className="item-sel";}}else{if(autoComplete.listBox.firstChild){autoComplete.listBox.firstChild.className="item-sel";top.autoComplete.actRow=autoComplete.listBox.firstChild;}}},"updateKey":function(){autoComplete.newArray[autoComplete.selectedIndex]=top.autoComplete.actRow.innerHTML.replace("&lt;","<").replace("&gt;",">").replace(/<b>(.*)<\/b>/i,"$1")+(autoComplete.selectedIndex==autoComplete.newArray.length-1?", ":"");autoComplete.active.value=autoComplete.newArray;autoComplete.closeList();autoComplete.active.focus();},"closeList":function(){if(autoComplete.listBox){top.evnt.removeEvent(frames["work"].document,"click",top.autoComplete.closeList,false);autoComplete.listBox.innerHTML="";autoComplete.listBox.style.display="none";top.autoComplete.actRow=null;}}};var sms={"removeDiacritic":function(textarea,labelText){var lb=_gEOWork("label-"+textarea);lb.innerHTML=labelText;var o=_gEOWork(textarea);var text=o.value;var oldtext=text;var Diacritic="áäčďéěíĺľňóôőöŕšťúůűüýřžÁÄČĎÉĚÍĹĽŇÓÔŐÖŔŠŤÚŮŰÜÝŘŽŁŞŻłąşÂĂĆÇĘËÎĐŃćçăęëđń";var DiacRemoved="aacdeeillnoooorstuuuuyrzAACDEEILLNOOOORSTUUUUYRZLSZlasAACCEEIDNccaeedn";var ptext="";for(i=0;i<text.length;i++){if(Diacritic.indexOf(text.charAt(i))!=-1)ptext+=DiacRemoved.charAt(Diacritic.indexOf(text.charAt(i)));else{ptext+=text.charAt(i);}}top.switchEdit(textarea,"none","inline");top._gEOWork("jtextcont").innerHTML=ptext.replace(/</g,"&lt;");return false;},"compress":function(textarea,labelText){var lb=_gEOWork("label-"+textarea);lb.innerHTML=labelText;var o=_gEOWork(textarea);var oldtext=text;var text=o.value.replace(/[\r\n\t,]/g," ");;var ptext="";up=1;for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch==" "){up=1;continue;}else{if(up==1){up=0;ch=ch.toUpperCase();}}ptext+=ch;}top.switchEdit(textarea,"none","inline");top._gEOWork("jtextcont").innerHTML=ptext.replace(/</g,"&lt;");return false;},"txtArea":null,"cntCharsEl":null,"cntSMSEl":null,"sms_len":160,"sizing_len":5,"lang":"cz","initCnt":function(textarea,cntChars,numSMS,lang){this.lang=lang;this.txtArea=_gEOWork(textarea);this.cntCharsEl=_gEOWork(cntChars);this.cntSMSEl=_gEOWork(numSMS);this.calculate();},"infoSMS":function(smsNum,charNum){txt1=charNum;txt2=smsNum;if(charNum==1)txt1=charNum+" znak";if(charNum==2||charNum==3||charNum==4)txt1=charNum+" znaky";if(charNum>4||charNum==0)txt1=charNum+(this.lang=="cz"?" znaků":" znakov");if(smsNum==1)txt2=smsNum+" SMSku";if(smsNum==2||smsNum==3||smsNum==4)txt2=smsNum+" SMSky";if(smsNum>4||smsNum==0)txt2=smsNum+(this.lang=="cz"?" SMSek":" SMSiek");this.cntCharsEl.value=txt1;if(parseInt(this.cntSMSEl.value,10)!=smsNum)this.cntSMSEl.value=txt2;},"calculate":function(){if(top.sms.txtArea.value.length<=160)return sms.infoSMS(1,top.sms.txtArea.value.length);count=(top.sms.txtArea.value.length+top.sms.sms_len-1-top.sms.sizing_len)/(top.sms.sms_len-sms.sizing_len);if(count>=10){xsms_len=top.sms.sms_len-top.sms.sizing_len-1;xlength=top.sms.txtArea.value.length-(xsms_len*9);xsms_len=top.sms.sms_len-top.sms.sizing_len-2;count=9+(xlength+xsms_len-1)/xsms_len;}count=Math.floor(count);sms.infoSMS(count,top.sms.txtArea.value.length);}};}
